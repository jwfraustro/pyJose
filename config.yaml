data_file: 'test2obj.fits'    # File name of processed image (raw-sky)/flat for IR, (raw-bias)/flat for optical
var: null     # Variance image of data in DN^2 (i.e., data/q+rn^2)
rn: 0.0      # Read noise of data frame in DN
q: 10.0       # Effective number of photos per DN for data frame
x1: 256      # Start boundary in x of spectrum (inclusive)
x2: 315      # End Boundary in x of spectrum (inclusive)
output_dir: 'output'

# GENERAL
skyvar: null      # Variance image of sky (default 0s)
inmask: null      # User input mask with good pixels=1, bad=0 (default 1s)
bpct: null        # Set the percentage of bad pixels before kicking out (0.5)
integrate: null   # Set to integrate over bad pixels when calculating spec for use in the profile fitting
varim: null

# BACKGROUND FITTING
nobgfit: null     # Set to not fit the background
bthresh: null     # sigma threshold for cosmic ray rejection for bg, (3)
bgdeg: null       # degree of polynomial fit for interpolation in fitbg (1)
absthresh: False

# PROFILE FITTING - GEOMETRY ADJUSTMENT
adjfunc: null     # The name of the function to call with images to modify
adjoptions:
  level: null     # The amount to expand the array
  center: null    # Set to 1 to adjust each column so the centers line up (1)
  width: null     # Adjust to reflect each pixel's relative distance from center
                  # according to that row's gaussian width
  centroid: null  # Set to use centroid fitting instead
  gaussth: null   # The absolute value of allowable error when fitting a gaussian
                  # to the data (3 percent)
  shiftth: null   # The absolute allowable error between a row's center and the
                  # fitted trace
  degcontr: null  # degree of fit to use when contracting the array (2)
  centerdeg: null # degree of fit for estimating the shift (2)
  centerfit: null # set to not fit the estimated centers and not accept the
                  # the fitting to be correct

adjparms:
  origx: null
  adjx: null
  traceest: null
  widthest: null

# PROFILE FITTING - SMOOTHING
noproffit: null # Will not smooth spatial profile if set
pthresh: null   # Sigma threshold for profile image (3)
profdeg: null   # Degree to smooth spatial profile (3)
fitgauss: null  # Set to smooth the profile image using a Gaussian fit
                # in the spatial direction, instead of a polynomial fit in
                # wavelength direction
fitboxcar: null # Set to smooth the profile using a median filter in
                # spectral dimension
boxcarhw: null  # The half-width of the boxcar fit (5)

# OPTIMAL EXTRACTION
ethresh: null   # Sigma threshold for main mask (5)

# DEBUGGING
verbose: 2
  # Set to level of output
  #   0 - fatal
  #   1 - collect stats
  #   2 - where you are in the program
  #   3 - output every warning
  #   4 - plot how the data are being used
  #   5 - stop after each iteration
plottype: null
  # Set to the type of plot output to the screen
  #   0 - No Plots
  #   1 - Show a summary of all processed frames
  #   2 - Show the data used as input to procvect
  #   3 - Show how procvect is fitting the data
  #   4 - Use shade_surf to show the fitted and raw data
  #   5 - Show all plots

bgotovect: null # fitbg will halt execution at this row
pgotovect: null # fitprof will halt execution at this row
egotovect: null # specext will halt execution at this row
debughead: null # Text to place at the top of the processed array plot

# Output Options
# Background Fitting
bgim: null      # Interpolated sky background image
bgmask: null    # Background's mask
bgres: null     # The sigma difference between the actual and expected
berrvect: null  # Mask of rows where iteration stopped during fitbg

# Standard Extraction
stdspec: null   # Standard spectrum
stdvar: null    # Returns variance of standard spectrum

# Profile Fitting:
profim: null    # Calculated profile image
profmask: null  # The calculated profile cosmic ray mask
difpmask: null  # Pixels rejected during the profile fitting routine
profres: null   # The profile residual image
perrvect: null  # Mask of rows/columns where iteration stopped during fitprof

# Optimal Extraction:
opvar: null     # Returns optimally extracted variance
varout: null    # Returns the final calculated variance
exmask: null    # Calculated cosmic ray mask
exres: null     # Cosmic ray image: dataim-spec*profim*profim/varim
eerrvect: null  # Mask of rows where iteration stopped during extrspec